[settings]
python.uv_venv_auto = true

[tools]
age = "latest"
uv = "latest"
sops = "latest"
dprint = "0.50.1"
deno = "2.4.1"

[env]
'_'.file.path = ".env.yaml"

[tasks.pyright]
description = "Typecheck"
run = "uv run pyright --project=."

[tasks.dev]
description = "Start the bot"
env.DEV_MODE = "True"
run = "uv run emilybot"

[tasks.test]
description = "Run database tests"
run = "uv run pytest"

[tasks.fmt]
description = "Format code"
run = "dprint fmt"

[tasks.check]
description = "Check formatting"
run = "dprint check"

[tasks."secrets:updatekeys"]
description = "Update secret keys"
run = "sops updatekeys .env.yaml"
